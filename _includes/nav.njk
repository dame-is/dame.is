<!-- _includes/nav.njk --> 
<nav>
    <!-- TOP SECTION: Logo + Status -->
    <div class="nav-section top-nav">
        <!-- Left side of the top section -->
        <div class="nav-left top-nav-left">
            <!-- First line: site title + latest log text -->
            <div class="site-title-and-latest-log">
                <a href="/" class="title nav-link">dame.is</a>
                <!-- Dynamically filled by JS -->
                <span id="recent-log-container">
                    <div>
                        <span id="recent-log-text">loading status...</span>
                        <span id="recent-log-time"></span>
                    </div>
                </span>
            </div>
        </div>
    </div>

    <!-- STATS SECTION: Follower counts, etc. -->
    <div class="nav-section bottom-nav">
        <!-- Right side - Social Icons and Theme Toggle -->
        <div class="nav-right bottom-nav-right">
            <!-- Bluesky Icon -->
            <a href="https://bsky.app/profile/did:plc:gq4fo3u6tqzzdkjlwzpb23tj" target="_blank" rel="noopener noreferrer" class="nav-icon" aria-label="Bluesky Profile">
                <svg class="icon fa-bluesky" fill="currentColor">
                    <use href="/assets/icons/icons-sprite.svg#icon-bluesky"></use>
                </svg>
            </a>
        
            <!-- GitHub Icon -->
            <a href="https://github.com/dame-is" target="_blank" rel="noopener noreferrer" class="nav-icon" aria-label="GitHub Profile">
                <svg class="icon fa-github" fill="currentColor">
                    <use href="/assets/icons/icons-sprite.svg#icon-github"></use>
                </svg>
            </a>

            <!-- Discord Icon -->
            <a href="https://discord.gg/95ypHb2qPE" target="_blank" rel="noopener noreferrer" class="nav-icon" aria-label="Discord Server">
            <svg class="icon fa-discord" fill="currentColor">
                <use href="/assets/icons/icons-sprite.svg#icon-discord"></use>
            </svg>
           </a>
        
            <!-- Theme Toggle -->
            <button id="theme-toggle" aria-label="Toggle theme" class="theme-toggle-button">
                <svg class="icon fa-moon" fill="currentColor">
                    <use href="/assets/icons/icons-sprite.svg#icon-moon"></use>
                </svg>
            </button>
        </div>  
        <!-- Left side - Bluesky Stats -->
        <div class="nav-left bottom-nav-left">
            <span id="bluesky-stats">
                <span style="font-weight: bold;" id="followers">-</span> followers
                <span style="font-weight: bold; padding-left: 5px;" id="following">-</span> following
                <!-- Temporarily removed posts and replies counts
                <span style="font-weight: bold; padding-left: 5px;" id="posts">-</span> posts
                <span style="font-weight: bold; padding-left: 5px;" id="replies">-</span> replies
                -->
            </span>
        </div>
    </div>

    <!-- PINNED LINKS SECTION -->
    <div class="nav-section bottom-nav">
        <div class="nav-left bottom-nav-left">
            <span class="pin-emoji">ðŸ“Œ</span>
            <div class="nav-links">
                <a href="/writing" class="nav-link {% if page.url.startsWith('/writing/') %}active{% endif %}">/writing</a>
                <a href="/creating" class="nav-link {% if page.url.startsWith('/creating/') %}active{% endif %}">/creating</a>
                <a href="/sharing" class="nav-link {% if page.url.startsWith('/sharing/') %}active{% endif %}">/sharing</a>
                <a href="/logging" class="nav-link {% if page.url == '/logging/' %}active{% endif %}">/logging</a>
                <a href="/supported" class="nav-link {% if page.url == '/supported/' %}active{% endif %}">/supported</a>
            </div>
        </div>
    </div>

    <!-- FILEPATH SECTION -->
    <div class="nav-section bottom-nav filepath-nav">
        <div class="nav-left bottom-nav-left">
            <span class="link-emoji">ðŸ”—</span>
            <div class="filepath-links">
                <span class="filepath-link">
                    <a href="/" class="filepath-segment">dame.is</a>
                </span>
                {% set pathSegments = page.url | split('/') | filter %}
                {% set currentPath = '' %}
                {% for segment in pathSegments %}
                    {% if segment and segment != '' %}
                        {% set currentPath = currentPath + '/' + segment %}
                        {% if not loop.last or segment != 'index.html' %}
                            <span class="filepath-separator">/</span>
                            <span class="filepath-link">
                                <a href="{{ currentPath }}" class="filepath-segment">{{ segment }}</a>
                            </span>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</nav> 